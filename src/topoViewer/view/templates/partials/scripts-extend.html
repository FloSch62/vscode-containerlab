    <!-- Smart Viewer/Editor Detection Variables -->
    <script> window.deploymentState = "{{deploymentState}}"; </script>
    <script> window.viewerMode = "{{viewerMode}}"; </script>

    <!-- Load the compiled TypeScript bundle -->
    <script src="{{jsOutDir}}/topoViewerEngine.js?ver=1"></script>

    <!-- Initialize TopoViewer after bundle loads -->
    <script>
      // Wait for TopoViewerEngine to be available and initialize
      if (typeof TopoViewerEngine !== 'undefined') {
        if (typeof log !== 'undefined' && log.info) {
          log.info('TopoViewerEngine loaded successfully');
        }
        // The bundle includes DOMContentLoaded handler, so initialization is automatic
      } else {
        if (typeof log !== 'undefined' && log.error) {
          log.error('TopoViewerEngine failed to load');
        }
      }
    </script>
