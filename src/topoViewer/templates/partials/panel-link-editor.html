<!-- Unified Link Editor Panel (Tabbed: Basic | Extended) -->
<div class="panel panel-overlay fixed bottom-10 left-20 w-[420px] max-h-[560px] overflow-y-hidden overflow-x-hidden z-[21] draggable-panel" id="panel-link-editor" style="display: none;">
  <p class="panel-heading text-base font-bold">Link Editor</p>

  <!-- Tabs -->
  <div class="flex border-b justify-start px-2" style="border-color: var(--vscode-panel-border);">
    <button class="tab-button px-4 py-2 font-medium focus:outline-none tab-active" id="panel-link-tab-btn-basic" data-tab="basic">Basic</button>
    <button class="tab-button px-4 py-2 font-medium focus:outline-none" id="panel-link-tab-btn-extended" data-tab="extended">Extended</button>
  </div>

  <!-- Tab Content Container -->
  <div class="p-2 max-h-[420px] overflow-y-auto">
    <!-- Basic Tab -->
    <div class="panel-block tab-content" id="panel-link-tab-basic" style="display:block;">
      <div class="px-2">
        <!-- Link preview -->
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Link</label></div>
              <div class="w-3/5 pl-2 pr-2"><div id="panel-link-editor-id" class="text-left font-extralight text-base break-words"></div></div>
            </div>
          </div>
        </div>
        <!-- Source Endpoint -->
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Source Endpoint</label></div>
              <div class="w-3/5 pl-2 pr-2"><input type="text" id="panel-link-editor-source-endpoint" class="input-field w-full text-base font-extralight h-[28px]" placeholder="e.g., eth1, e1-1"></div>
            </div>
          </div>
        </div>
        <!-- Target Endpoint -->
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Target Endpoint</label></div>
              <div class="w-3/5 pl-2 pr-2"><input type="text" id="panel-link-editor-target-endpoint" class="input-field w-full text-base font-extralight h-[28px]" placeholder="e.g., eth1, e1-1"></div>
            </div>
          </div>
        </div>
        <!-- Buttons -->
        <div class="my-2">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"></div>
              <div class="w-3/5 pl-2 pr-2">
                <div class="flex justify-end space-x-2">
                  <button id="panel-link-editor-save-button" class="btn btn-primary btn-small h-[28px] px-3">Save</button>
                  <button id="panel-link-editor-close-button" class="btn btn-outlined btn-small h-[28px] px-3">Close</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Extended Tab -->
    <div class="panel-block tab-content" id="panel-link-tab-extended" style="display:none;">
      <div class="px-2">
        <!-- Link preview -->
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Link</label></div>
              <div class="w-3/5 pl-2 pr-2"><div id="panel-link-extended-editor-id" class="text-left font-extralight text-base break-words"></div></div>
            </div>
          </div>
        </div>

        <!-- Validation banner -->
        <div id="panel-link-ext-errors" style="display:none;" class="my-2 p-2 rounded bg-[var(--vscode-inputValidation-errorBackground)] border border-[var(--vscode-inputValidation-errorBorder)]">
          <div class="text-[var(--vscode-editorError-foreground)] text-sm font-semibold">Invalid link configuration</div>
          <div id="panel-link-ext-errors-list" class="text-[var(--vscode-editorError-foreground)] text-xs mt-1"></div>
        </div>

        <!-- Type dropdown -->
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Type</label></div>
              <div class="w-3/5 pl-2 pr-2">
                <span id="panel-link-ext-type-display" class="text-base px-2 py-1 inline-block rounded" style="background-color: var(--vscode-textBlockQuote-background); border: 1px solid var(--vscode-textBlockQuote-border);">veth</span>
                <span class="text-xs text-gray-500 ml-2">(auto-detected)</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Common fields -->
        <div class="border-t border-[var(--vscode-widget-border)] my-2"></div>
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Source MAC</label></div>
              <div class="w-3/5 pl-2 pr-2"><input type="text" id="panel-link-ext-src-mac" class="input-field w-full text-base font-extralight h-[28px]" placeholder="e.g., 02:42:ac:11:00:01"></div>
            </div>
          </div>
        </div>
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Target MAC</label></div>
              <div class="w-3/5 pl-2 pr-2"><input type="text" id="panel-link-ext-tgt-mac" class="input-field w-full text-base font-extralight h-[28px]" placeholder="e.g., 02:42:ac:11:00:02"></div>
            </div>
          </div>
        </div>
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">MTU</label></div>
              <div class="w-3/5 pl-2 pr-2"><input type="number" id="panel-link-ext-mtu" class="input-field w-full text-base font-extralight h-[28px]" placeholder="e.g., 1500"></div>
            </div>
          </div>
        </div>

        <!-- Vars / Labels (JSON) -->
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-start">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Vars (JSON)</label></div>
              <div class="w-3/5 pl-2 pr-2">
                <textarea id="panel-link-ext-vars" class="input-field w-full text-base font-extralight" rows="3" placeholder='e.g., {"foo": "bar"}'></textarea>
                <div id="panel-link-ext-vars-error" class="text-[var(--vscode-editorError-foreground)] text-xs mt-1" style="display:none;">Invalid JSON</div>
              </div>
            </div>
          </div>
        </div>
        <div class="my-1">
          <div class="p-0.5">
            <div class="flex items-start">
              <div class="w-2/5 pr-1"><label class="label text-right text-base font-semibold">Labels (JSON)</label></div>
              <div class="w-3/5 pl-2 pr-2">
                <textarea id="panel-link-ext-labels" class="input-field w-full text-base font-extralight" rows="3" placeholder='e.g., {"role": "primary"}'></textarea>
                <div id="panel-link-ext-labels-error" class="text-[var(--vscode-editorError-foreground)] text-xs mt-1" style="display:none;">Invalid JSON</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Info message for non-veth links -->
        <div class="my-1" id="panel-link-ext-non-veth-info" style="display:none;">
          <div class="p-2 rounded bg-[var(--vscode-textBlockQuote-background)] border border-[var(--vscode-textBlockQuote-border)]">
            <div class="text-sm">
              <span class="font-semibold">Note:</span> This link connects to a network node. Configure extended properties on the network node itself.
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div class="my-2">
          <div class="p-0.5">
            <div class="flex items-center">
              <div class="w-2/5 pr-1"></div>
              <div class="w-3/5 pl-2 pr-2">
                <div class="flex justify-end space-x-2">
                  <button id="panel-link-extended-editor-save-button" class="btn btn-primary btn-small h-[28px] px-3">Save</button>
                  <button id="panel-link-extended-editor-close-button" class="btn btn-outlined btn-small h-[28px] px-3">Close</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
